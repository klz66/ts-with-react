[{"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\trashIndex.js":"1","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\store\\reducer.js":"2","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\store\\reducer.js":"3","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\store\\actionCreators.js":"4","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\components\\List.js":"5","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\loadable.js":"6","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\write\\index.js":"7","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\request.js":"8","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\store\\index.js":"9","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\store\\actionCreators.js":"10","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\store\\actionCreators.js":"11","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\index.js":"12","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\index.js":"13","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\index.js":"14","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\store\\constants.js":"15","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\store\\actionCreators.js":"16","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\store\\constants.js":"17","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\components\\Recommend.js":"18","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\style.js":"19","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\components\\Write.js":"20","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\index.js":"21","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\style.js":"22","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\style.js":"23","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\index.js":"24","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\style.js":"25","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\upload.js":"26","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\verify\\index.js":"27","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\App.js":"28","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\utils.js":"29","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\style.js":"30","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\store\\index.js":"31","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\statics\\iconfont\\iconfont.js":"32","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\trash\\index.js":"33","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\store\\constants.js":"34","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\store\\reducer.js":"35","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\config.js":"36","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\store\\reducer.js":"37","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\focusIndex.js":"38","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\messageIndex.js":"39","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\store\\index.js":"40","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\store\\reducer.js":"41","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\store\\constants.js":"42","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\setting\\index.js":"43","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\store\\index.js":"44","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\uploadWithButton.js":"45","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\store\\index.js":"46","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\personal\\index.js":"47","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\personal\\components\\List.js":"48"},{"size":992,"mtime":1616378237716,"results":"49","hashOfConfig":"50"},{"size":817,"mtime":1616843245932,"results":"51","hashOfConfig":"50"},{"size":1042,"mtime":1614505021692,"results":"52","hashOfConfig":"50"},{"size":943,"mtime":1617026543499,"results":"53","hashOfConfig":"50"},{"size":3471,"mtime":1617642292961,"results":"54","hashOfConfig":"50"},{"size":385,"mtime":1614511711669,"results":"55","hashOfConfig":"50"},{"size":11820,"mtime":1617612477582,"results":"56","hashOfConfig":"50"},{"size":1234,"mtime":1616833770702,"results":"57","hashOfConfig":"50"},{"size":174,"mtime":1529910746000,"results":"58","hashOfConfig":"50"},{"size":2348,"mtime":1617642188968,"results":"59","hashOfConfig":"50"},{"size":1089,"mtime":1612281703012,"results":"60","hashOfConfig":"50"},{"size":392,"mtime":1616071048357,"results":"61","hashOfConfig":"50"},{"size":1053,"mtime":1616843157650,"results":"62","hashOfConfig":"50"},{"size":1751,"mtime":1617500418590,"results":"63","hashOfConfig":"50"},{"size":52,"mtime":1529910746000,"results":"64","hashOfConfig":"50"},{"size":2748,"mtime":1617615883347,"results":"65","hashOfConfig":"50"},{"size":427,"mtime":1612193251724,"results":"66","hashOfConfig":"50"},{"size":1339,"mtime":1616427370806,"results":"67","hashOfConfig":"50"},{"size":2270,"mtime":1617464037595,"results":"68","hashOfConfig":"50"},{"size":3770,"mtime":1617636077651,"results":"69","hashOfConfig":"50"},{"size":6927,"mtime":1617444630772,"results":"70","hashOfConfig":"50"},{"size":2933,"mtime":1617243326475,"results":"71","hashOfConfig":"50"},{"size":327,"mtime":1616122426076,"results":"72","hashOfConfig":"50"},{"size":3526,"mtime":1616944528940,"results":"73","hashOfConfig":"50"},{"size":268,"mtime":1616637563086,"results":"74","hashOfConfig":"50"},{"size":1590,"mtime":1617174367969,"results":"75","hashOfConfig":"50"},{"size":1979,"mtime":1616843239489,"results":"76","hashOfConfig":"50"},{"size":1639,"mtime":1617119939859,"results":"77","hashOfConfig":"50"},{"size":711,"mtime":1616774435250,"results":"78","hashOfConfig":"50"},{"size":1187,"mtime":1612075903232,"results":"79","hashOfConfig":"50"},{"size":574,"mtime":1612083110356,"results":"80","hashOfConfig":"50"},{"size":2964,"mtime":1613812122582,"results":"81","hashOfConfig":"50"},{"size":5202,"mtime":1617098154526,"results":"82","hashOfConfig":"50"},{"size":87,"mtime":1529910746000,"results":"83","hashOfConfig":"50"},{"size":531,"mtime":1614501482672,"results":"84","hashOfConfig":"50"},{"size":455,"mtime":1617100451243,"results":"85","hashOfConfig":"50"},{"size":513,"mtime":1614494900861,"results":"86","hashOfConfig":"50"},{"size":433,"mtime":1616859747189,"results":"87","hashOfConfig":"50"},{"size":536,"mtime":1616860417466,"results":"88","hashOfConfig":"50"},{"size":174,"mtime":1529910746000,"results":"89","hashOfConfig":"50"},{"size":551,"mtime":1614498341870,"results":"90","hashOfConfig":"50"},{"size":319,"mtime":1616145365864,"results":"91","hashOfConfig":"50"},{"size":4235,"mtime":1617453484909,"results":"92","hashOfConfig":"50"},{"size":174,"mtime":1529910746000,"results":"93","hashOfConfig":"50"},{"size":1774,"mtime":1617444143537,"results":"94","hashOfConfig":"50"},{"size":264,"mtime":1612104744310,"results":"95","hashOfConfig":"50"},{"size":3722,"mtime":1617643060466,"results":"96","hashOfConfig":"50"},{"size":2804,"mtime":1617643343159,"results":"97","hashOfConfig":"50"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"100"},"1v762i6",{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"103"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"108"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"113"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116","usedDeprecatedRules":"113"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"119"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"122"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"129"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"129"},{"filePath":"132","messages":"133","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"134","messages":"135","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"113"},{"filePath":"136","messages":"137","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"138","messages":"139","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"140","messages":"141","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"142"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"145","messages":"146","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"147","messages":"148","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"149","usedDeprecatedRules":"150"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"153","messages":"154","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"113"},{"filePath":"155","messages":"156","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"157","usedDeprecatedRules":"158"},{"filePath":"159","messages":"160","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"113"},{"filePath":"161","messages":"162","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"163","messages":"164","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"165","usedDeprecatedRules":"166"},{"filePath":"167","messages":"168","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"169","messages":"170","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"171","usedDeprecatedRules":"119"},{"filePath":"172","messages":"173","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"174"},{"filePath":"175","messages":"176","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"174"},{"filePath":"177","messages":"178","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"179"},{"filePath":"180","messages":"181","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"119"},{"filePath":"182","messages":"183","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"113"},{"filePath":"184","messages":"185","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"150"},{"filePath":"186","messages":"187","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"188","messages":"189","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"166"},{"filePath":"190","messages":"191","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"150"},{"filePath":"192","messages":"193","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"108"},{"filePath":"194","messages":"195","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"113"},{"filePath":"196","messages":"197","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"166"},{"filePath":"198","messages":"199","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"100"},{"filePath":"200","messages":"201","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"202","messages":"203","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"204","messages":"205","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"206","usedDeprecatedRules":"158"},{"filePath":"207","messages":"208","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"209","messages":"210","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"211","messages":"212","errorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\trashIndex.js",[],["213","214"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\store\\reducer.js",[],["215","216"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\store\\reducer.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\store\\actionCreators.js",[],["217","218"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\components\\List.js",["219","220","221","222","223","224","225","226","227","228","229"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\loadable.js",[],["230","231"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\write\\index.js",["232"],"/*\n * @Description: \n * @Author: Zhong Kailong\n * @LastEditTime: 2021-04-05 16:47:57\n */\nimport React, { useRef,useEffect,useState } from 'react';\nimport { connect } from 'react-redux';\nimport http from '@/utils/request'\nimport { notification,List,Popconfirm  } from 'antd';\nimport {demoUrl,uploadUrl} from '@/utils/utils';\n\nimport zh_CN from '../../../public/tinymce/langs/zh_CN';\nimport tinyMce from 'tinymce/tinymce';\nimport { Editor } from '@tinymce/tinymce-react';\nimport { StopOutlined,CheckCircleOutlined } from '@ant-design/icons';\nimport './index.less'\nvar _ = require('lodash');\n\n\n\nfunction Write(props) {\n  let memberInfo = JSON.parse(window.localStorage.getItem('memberInfo'))\n  let editorRef = useRef()\n  let [draftList,setDraftList] = useState([]);\n  let [actice,setActice] = useState(-1);\n\n  useEffect(() => {\n    updateDraftList(); \n    console.log(actice);\n    if(actice<0){\n      localStorage.removeItem('blogId')\n    }\n  },[actice]);\n  function changeContent(index,item) {\n    setActice(index)\n    console.log(draftList);\n    if(draftList.length>0){\n      let item = draftList[index]\n      \n      let trialDom=tinyMce.activeEditor.contentDocument\n      if(trialDom){\n        let dom=trialDom.getElementById('tinymce')\n        if(item){\n            console.log(item);\n            localStorage.setItem('blogId',item.id)\n            dom.innerHTML=item.content\n        }\n      }\n    }\n  }\n  async function updateDraftList(){\n    let res = await http.get(`${demoUrl}/blogservice/blog-curd/getBlogDraftList`);\n    if(res.code === 20000) {\n      setDraftList(res.data.list.map(i=>({\n        id: i.id,\n        title: i.title==='无标题'? i.gmtCreate.slice(0,10):i.title.slice(0,10),\n        content: i.content\n      })))\n    }\n    if(res.data.list?.length === 0){\n      setTimeout(function(){\n        let trialDom=tinyMce.activeEditor.contentDocument\n        let dom=trialDom.getElementById('tinymce')\n        dom.innerHTML=null\n        editorRef.current.currentContent = null\n        localStorage.setItem('blogId',null)\n        setActice(-1);\n      },400)\n    }\n    \n    // changeContent(actice)\n  }\n  const handleEditorChange = (content, editor) => {\n    console.log('Content was updated:', content);\n  };\n  const openNotificationWithIcon = type => {\n    notification[type]({\n      message: '发表成功',\n    });\n    let trialDom=tinyMce.activeEditor.contentDocument\n    let dom=trialDom.getElementById('tinymce')\n    dom.innerHTML=''\n  };\n  const handAdd = async() =>{\n    const params = {\n      'title':'无标题',\n      'name': memberInfo.nickname,\n      'authorId': memberInfo.id\n    }\n    let res = await http.post(`${demoUrl}/blogservice/blog-curd/saveDraftBlog`,params);\n    if(res.code === 20000) {\n      notification['success']({\n        message: '新增成功',\n      });\n      let params = {\n        ...res.data.item,\n        title: res.data.item.gmtCreate.slice(0,10)\n      }\n        let list = [params,...draftList]\n        setDraftList(list)\n        setActice(0)\n        setTimeout(function(){\n          let trialDom=tinyMce.activeEditor.contentDocument\n          let dom=trialDom.getElementById('tinymce')\n          dom.innerHTML=null\n          editorRef.current.currentContent = null\n          localStorage.setItem('blogId',res.data.item.id)\n        },400)\n\n    }\n  }\n  async function handleSave(content){\n    console.log(draftList)\n    if(localStorage.getItem('blogId').length!==19){\n      notification['error']({\n        message: '请先选择文章'\n      })\n      return\n    } else {\n      console.log(localStorage.getItem('blogId'));\n    }\n    let blogId = localStorage.getItem('blogId')\n    if(content.length === 0) {\n      notification['error']({\n        message: '内容不能为空'\n      })\n      return\n    }\n    const params = {\n      \"id\": blogId,\n      \"title\": formatTitle(content),\n      \"content\": content,\n      'name': memberInfo.nickname,\n      'authorId': memberInfo.id\n    }\n    let res = await http.post(`${demoUrl}/blogservice/blog-curd/saveDraftBlog`,params);\n    if(res.code === 20000) {\n      notification['success']({\n        message: '保存成功',\n      });\n      updateDraftList();\n    }\n  }\n  const handSave = async(content) =>{\n    handleSave(content)\n  }\n  const handPost = async(content) =>{\n    if(localStorage.getItem('blogId').length!==19){\n      notification['error']({\n        message: '请先选择文章'\n      })\n      return\n    } else {\n      console.log(localStorage.getItem('blogId'));\n    }\n    if(content === null || content.length === 0) {\n      notification['error']({\n        message: '内容不能为空'\n      })\n      return\n    }\n    if(formatTitle(content).length>30){\n      notification['error']({\n        message: '标题长度太长'\n      })\n      return\n    } \n    if(localStorage.getItem('blogId')){\n      const params = {\n        \"id\": localStorage.getItem('blogId'),\n        \"title\": formatTitle(content),\n        \"content\": content,\n        'authorId': memberInfo.id\n      }\n      let res = await http.post(`${demoUrl}/blogservice/blog-curd/updateDraftBlog`,params);\n      if(res.code === 20000) {\n        openNotificationWithIcon('success')\n        updateDraftList();\n      }\n    }else {\n      const params = {\n        \"title\": formatTitle(content),\n        \"content\": content,\n        'name': memberInfo.nickname,\n        'authorId': memberInfo.id\n      }\n      let res = await http.post(`${demoUrl}/blogservice/blog-curd/addBlog`,params);\n      if(res.code === 20000) {\n        openNotificationWithIcon('success')\n      }\n    }\n  }\n  async function confirmDelete(id){\n    let res = await http.delete(`${demoUrl}/blogservice/blog-curd/delete/forever/${id}`);\n    if(res.data.code === 20000) {\n      notification['success']({\n        message: '删除成功',\n      });\n      setTimeout(function(){\n        let trialDom=tinyMce.activeEditor.contentDocument\n        let dom=trialDom.getElementById('tinymce')\n        dom.innerHTML=null\n        editorRef.current.currentContent = null\n        localStorage.setItem('blogId',null)\n        setActice(-1);\n      },400)\n      updateDraftList()\n    }\n  }\n  async function confirmDeleteAll(){\n    let res = await http.delete(`${demoUrl}/blogservice/blog-curd/delete/draft/all/${memberInfo.id}`);\n    if(res.data.code === 20000) {\n      notification['success']({\n        message: '清除成功',\n      });\n      setTimeout(function(){\n        let trialDom=tinyMce.activeEditor.contentDocument\n        let dom=trialDom.getElementById('tinymce')\n        dom.innerHTML=null\n        localStorage.setItem('blogId',null)\n        editorRef.current.currentContent = null\n        setActice(-1);\n      },400)\n      updateDraftList()\n    }\n  }\n  function formatTitle(content) {\n    var re1 = new RegExp(\"<.+?>\",\"g\");//匹配html标签的正则表达式，\"g\"是搜索匹配多个符合的内容\n    if(!_.isEmpty(content.match(/((?<=<h1>).+?)(?=<\\/h1>)/))) {\n      return content.match(/((?<=<h1>).+?)(?=<\\/h1>)/)[0].replace(re1,'');\n    }\n    else if(!_.isEmpty(content.match(/((?<=<h2>).+?)(?=<\\/h2>)/))) {\n      return content.match(/((?<=<h2>).+?)(?=<\\/h2>)/)[0].replace(re1,'');\n    }\n    else if(!_.isEmpty(content.match(/((?<=<h3>).+?)(?=<\\/h3>)/))) {\n      return content.match(/((?<=<h3>).+?)(?=<\\/h3>)/)[0].replace(re1,'');\n    }\n    else if(!_.isEmpty(content.match(/((?<=<h4>).+?)(?=<\\/h4>)/))) {\n      return content.match(/((?<=<h4>).+?)(?=<\\/h4>)/)[0].replace(re1,'');\n    }\n    else if(!_.isEmpty(content.match(/((?<=<h5>).+?)(?=<\\/h5>)/))) {\n      return content.match(/((?<=<h5>).+?)(?=<\\/h5>)/)[0].replace(re1,'');\n    }\n    else if(!_.isEmpty(content.match(/((?<=<h6>).+?)(?=<\\/h6>)/))) {\n      return content.match(/((?<=<h6>).+?)(?=<\\/h6>)/)[0].replace(re1,'');\n    }\n    else{\n      return '无标题'\n    } \n  }\n  \n\t\t\treturn (\n        <div style={{display:'flex',height:'100vh'}}>\n          <div style={{width:'180px',marginRight:'50px'}}>\n            \n            <List\n              size=\"small\"\n              style = {{overflowY:'scroll'}}\n              header={<div onClick={()=>handAdd()}>新建文章</div>}\n              footer={\n                <Popconfirm\n                title=\"确定清除草稿箱？\"\n                onConfirm={()=>confirmDeleteAll()}\n                okText=\"Yes\"\n                cancelText=\"No\"\n              ><div>             \n              清除草稿箱\n              </div>\n              </Popconfirm>\n              }\n              bordered\n              dataSource={draftList}\n              renderItem={(item,index) => <List.Item style={{display:'flex',justifyContent:'space-between',backgroundColor: index === actice?'#ddd':''}} onClick={()=>{\n                changeContent(index,item);\n              }}>{item.title}\n              <div className='icon-margin'>\n              <Popconfirm\n                title=\"确认直接发表\"\n                onConfirm={()=>handPost(item.content)}\n                okText=\"Yes\"\n                cancelText=\"No\"\n              >\n              <CheckCircleOutlined  />\n              </Popconfirm>\n              <Popconfirm\n                title=\"确认删除此草稿\"\n                onConfirm={()=>confirmDelete(item.id)}\n                okText=\"Yes\"\n                cancelText=\"No\"\n              >\n                <StopOutlined />\n              </Popconfirm>\n              </div>\n              </List.Item>}\n            />\n          </div>\n\t\t\t\t<div>\n          <Editor\n            ref={editorRef}\n            initialValue={''}\n            apiKey='i24scrj5aegi7posl2kwbygrvkcgywqul11wtqrwoltystrh'\n            selecector='editorStateRef'\n            init={{\n            height: 500,\n            width:900,\n            language_url: zh_CN,\n            language:'zh_CN',\n            images_upload_handler: async function (blobInfo, succFun, failFun) {\n              let formData = new FormData();\n              formData.append('file',blobInfo.blob())\n              let res = await http.post(`${uploadUrl}/eduoss/fileoss`,formData)\n              if(res.code === 20000) {\n                succFun(res.data.url);\n              }\n            },\n            // menubar: false,\n            plugins: [\n              'advlist autolink lists link image charmap print preview anchor',\n              'searchreplace visualblocks code fullscreen',\n              'insertdatetime media table paste code help wordcount'\n            ],\n            \n            toolbar: 'undo redo image| formatselect | bold italic backcolor | \\\n               alignleft aligncenter alignright alignjustify | \\\n                fullscreen save sumbit back',\n              setup: (editor) => {\n                editor.ui.registry.addButton('save', {\n                  text: '保存',\n                  icon: 'new-document',\n                  onAction: function(){\n                    let content = editorRef.current.currentContent?editorRef.current.currentContent:editorRef.current.props.initialValue;\n                    handSave(content)\n                  }\n                })\n                editor.ui.registry.addButton('sumbit', {\n                  text: '发表文章',\n                  icon: 'redo',\n                  onAction: function(){\n                    let content = editorRef.current.currentContent?editorRef.current.currentContent:editorRef.current.props.initialValue;\n                    handPost(content)\n                  }\n                })\n                editor.ui.registry.addButton('back', {\n                  text: '返回主页面',\n                  icon: 'chevron-left',\n                  onAction: function(){\n                    props.history.push('/')\n                  }\n                })\n              }\n          }}\n          onEditorChange={handleEditorChange}\n        />\n        </div>\n\n        </div>\n\t\t\t)\n  \n}\n\nconst mapState = (state) => ({\n})\n\nexport default connect(mapState, null)(Write);\n","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\request.js",[],["233","234"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\store\\index.js",[],["235","236"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\store\\actionCreators.js",["237","238","239","240"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\store\\actionCreators.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\index.js",[],["241","242"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\index.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\index.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\store\\constants.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\store\\actionCreators.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\store\\constants.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\components\\Recommend.js",[],["243","244"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\style.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\components\\Write.js",["245"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\index.js",["246","247","248"],"/*\n * @Description: \n * @Author: Zhong Kailong\n * @LastEditTime: 2021-04-03 18:10:29\n */\n\nimport 'antd/dist/antd.css'\nimport { connect } from \"react-redux\";\nimport {useState, useEffect} from 'react'\nimport  {  actionCreators  }  from \"./store\";\nimport { Link,withRouter } from 'react-router-dom'\nimport { CSSTransition } from \"react-transition-group\";\nimport { Menu, Dropdown, Avatar } from 'antd';\nimport { CaretDownFilled ,SettingOutlined,UserOutlined,HeartOutlined,InteractionOutlined ,PoweroffOutlined} from '@ant-design/icons';\nimport {\n\tHeaderWrapper,\n\tLogo,\n\tNav,\n\tNavItem,\n\tSearchWrapper,\n\tNavSearch,\n\tSearchInfo,\n\tSearchInfoTitle,\n\tSearchInfoSwitch,\n\tSearchInfoList,\n\tSearchInfoItem,\n\tAddition,\n\tButton\n} from './style';\n \nimport React from 'react';\n{/* <UserOutlined /> */}\nfunction Header(props) {\n  let memberInfo= JSON.parse(window.localStorage.getItem('memberInfo'))\n  const {page,totalPage,focused,mouseIn,list,changeFocusOn,changeFocusOff,handMouseIn,handMouseOut,changePage}=props;\n  const handleOut = () =>{\n    props.history.push( {pathname:'/login',state:{login:false}});\n    localStorage.removeItem('token');\n    localStorage.removeItem('memberInfo')\n  }\n  const getListArea = () => {\n    if(focused || mouseIn) {\n      let newList = [];\n      // let pageList = []\n      let jsList = list.toJS();\n      // 这里的3,是每页三个\n      let RightIndex = Math.min(((page+1)*3),jsList.length);\n      for(let i=(page*3);i<RightIndex;i++){\n        newList.push(jsList[i])\n      }\n\n      return (\n        <SearchInfo onMouseEnter={handMouseIn} onMouseLeave={handMouseOut}>\n        <SearchInfoTitle>\n          热门搜索\n          <SearchInfoSwitch onClick={()=>changePage(page,totalPage,list)}\n          >\n            换一批\n          </SearchInfoSwitch>\n        </SearchInfoTitle>\n        <SearchInfoList>\n          {newList.map(item => {\n            return (\n              <SearchInfoItem>{item}</SearchInfoItem>\n            )\n          })}\n        </SearchInfoList>\n      </SearchInfo>\n      )\n    }\n    else {\n      return null\n    }\n  }\n  const menu = (\n    <Menu>\n      <Menu.Item>\n      <span onClick={()=>{props.changeShowTab(5)}}>\n        <UserOutlined/>\n          个人主页\n        </span>\n      </Menu.Item>\n      <Menu.Item>\n        <span onClick={()=>{props.changeShowTab(4)}}>\n          <SettingOutlined />\n          个人信息\n        </span>\n      </Menu.Item>\n      <Menu.Item>\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.antgroup.com\">\n        <HeartOutlined/>\n          收藏文章\n        </a>\n      </Menu.Item>\n\n      <Menu.Item onClick={()=>{ props.history.push('recycle')}}>\n          <InteractionOutlined/>\n          回收站\n      </Menu.Item>\n      <Menu.Item>\n        <span target=\"_blank\" onClick={()=>{handleOut()}}>\n          <PoweroffOutlined/>\n          退出\n        </span>\n      </Menu.Item>\n    </Menu>\n  );\n  const toRegister = () => {\n    props.history.push( {pathname:'/login',state:{login:false}});\n  }\n  const handWrite = () => {\n    if(localStorage.getItem('token')){\n      window.open('/write')\n    } else {\n      props.history.push('/login');\n    }\n    \n  }\n  const toLogin = () => {\n    props.history.push( {pathname:'/login',state:{login:true}});\n  }\n  const isLogin = ()=>{\n    return (\n      <>\n       <Button onClick={()=>toRegister()} className='reg'>注册</Button>\n        <NavItem onClick={()=>toLogin()} className='right'>登录</NavItem>\n      </>   \n    )\n  }\n  const Header = () => {\n    return (\n      <HeaderWrapper>\n        <Link to='/'>\n          <Logo/>\n        </Link>\n        <Nav>\n          {localStorage.getItem('token') && <NavItem className='left' style={{color: props.showTab===2 &&'red'}} onClick={()=>{props.changeShowTab(2)}}>关注</NavItem>}\n          <NavItem className='left' style={{color: props.showTab===1 &&'red'}} onClick={()=>{props.changeShowTab(1)}}>发现</NavItem>\n          {localStorage.getItem('token') && <NavItem className='left' style={{color: props.showTab===3 &&'red'}} onClick={()=>{props.changeShowTab(3)}}>消息</NavItem>}\n         {/* <NavItem className='left' style={{color: props.showTab===2 &&'red'}} onClick={()=>{props.changeShowTab(2)}}>关注</NavItem>\n         <NavItem className='left' style={{color: props.showTab===1 &&'red'}} onClick={()=>{props.changeShowTab(1)}}>发现</NavItem>\n         <NavItem className='left' style={{color: props.showTab===3 &&'red'}} onClick={()=>{props.changeShowTab(3)}}>消息</NavItem> */}\n         <SearchWrapper>\n          <CSSTransition\n            in={focused}\n            timeout={300}\n            classNames='slide'\n          >\n            <NavSearch className={focused?'focused':''}\n              onFocus={()=>changeFocusOn(list)}\n              onBlur={changeFocusOff}\n            />\n          </CSSTransition>\n          {/* <i className=\"iconfont zoom\">&#xe6e4;</i> */}\n          <i className={focused ? 'focused iconfont zoom': 'iconfont zoom'}>\n                &#xe6e4;\n              </i>\n          {getListArea()}\n        </SearchWrapper>\n        </Nav>\n  \n        <Addition>\n            <Button className='writting' onClick={handWrite}>\n              <i className=\"iconfont\">&#xe742;</i>\n              写文章\n            </Button>\n            {\n              !localStorage.getItem('token') && isLogin()\n            }\n            {\n              localStorage.getItem('token') &&  \n              <Dropdown overlay={menu} placement=\"bottomCenter\">\n                <div style={{float:'right',marginTop: '9px',marginRight:'10px'}}>\n                <Avatar src={memberInfo?.avatar}></Avatar>\n                <CaretDownFilled  color='red'/>\n                </div>\n              </Dropdown>\n            }\n           \n        </Addition>\n      </HeaderWrapper>\n    );\n  }\n  return (\n    <div>\n      {Header()}\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  // focused:state.get('header').get('focused'),\n  // redux-immutable 的用法\n  focused:state.getIn(['header','focused']),\n  page:state.getIn(['header','page']),\n  list:state.getIn(['header','list']),\n  mouseIn:state.getIn(['header','mouseIn']),\n  totalPage:state.getIn(['header','totalPage']),\n  login:state.getIn(['login','login']),\n})\nconst mapDispatchToProps = (dispatch) => ({\n  changeFocusOn(list){\n    list.size === 0 && dispatch(actionCreators.getListApi())\n    // dispatch(actionCreators.getListApi())\n    dispatch(actionCreators.getInputFocusOn(true))\n  },\n  changeFocusOff(){\n    dispatch(actionCreators.getInputFocusOff(false))\n  },\n  handMouseIn(){\n    dispatch(actionCreators.getMouseIn())\n  },\n  handMouseOut(){\n    dispatch(actionCreators.getMouseOut())\n  },\n  changePage(page,totalPage,list){\n    if(page<totalPage-1){\n      dispatch(actionCreators.getPage(page+1))\n    } else {\n      dispatch(actionCreators.getPage(0))\n    }\n  },\n  loginIn(){\n  }\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Header));\n",["249","250"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\style.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\style.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\index.js",["251"],"/*\n * @Description: \n * @Author: Zhong Kailong\n * @LastEditTime: 2021-03-28 23:15:28\n */\n\nimport 'antd/dist/antd.css'\nimport { connect } from \"react-redux\";\nimport  {  actionCreators  }  from \"./store\";\nimport { Redirect } from 'react-router-dom';\nimport { LoginWrapper } from './style';\nimport { useRef,useState,useEffect } from 'react';\n// import { Link, } from 'react-router-dom'\nimport { useDebounce } from '@/utils/utils';\nimport { Input,Button,notification } from 'antd';\nimport Verify from '@/utils/verify'\nimport { UserOutlined ,LockFilled } from '@ant-design/icons';\n\nimport './index.less'\n\nfunction Login(props) {\n  const { loginStatus } = props;\n  let accountRef = useRef()\n  let pwdRef = useRef()\n  let [isVerify,setIsVerify] = useState(false)\n  let [isLogin,setIsLogin] = useState(true)\n  function sureVerify(bool) {\n    setIsVerify(bool)\n  }\n  function loginOrReagister(bool) {\n    setIsLogin(bool)\n    accountRef.current.state.value = ''\n    pwdRef.current.state.value = ''\n  }\n  useEffect(()=>{\n    console.log(props.location);\n    if(props.location.state === undefined) {\n      return;\n    }\n    if(props.location.state.login === false){\n      setIsLogin(false)\n    } \n  },[])\n  const loginFn = useDebounce(() => {\n    if(!isVerify){\n      notification['error']({\n        message: '验证码不正确',\n        duration: 1,\n      });\n      return;\n    }\n    props.login(accountRef,pwdRef);\n  }, 500);\n\n  const  register  = useDebounce(() => {\n    if(!isVerify){\n      notification['error']({\n        message: '验证码不正确',\n        duration: 1,\n      });\n      return;\n    }\n    props.register(accountRef,pwdRef);\n  }, 500);\n  return (\n    <div>\n    { \n      !loginStatus?<LoginWrapper>\n      <div className='LoginBox'>\n        <h4 className='title'>\n            <div className='center'>\n              <span\n                  className={isLogin ? 'active' : 'gray'} \n                  onClick={() => {\n                    loginOrReagister(true);\n                  }}>\n                  登录\n              </span>\n              <span\n                  className={isLogin ? 'gray' : 'active'} \n                  onClick={() => {\n                    loginOrReagister(false);\n                  }}>\n                  注册\n              </span>\n            </div>\n        </h4>\n        <div className='LoginInput'>\n          <Input size=\"large\" placeholder=\"账号\"  maxLength={12}  ref={accountRef} prefix={<UserOutlined />} />\n        </div>\n        <div className='LoginInput'>\n          <Input size=\"large\" placeholder=\"密码\" type='password' maxLength={18} ref={pwdRef} prefix={<LockFilled />} />   \n        </div>\n        <div className='verify'>\n        {isLogin&&<Verify sureVerify={sureVerify}/>}\n        {!isLogin&&<Verify sureVerify={sureVerify}/>}\n        </div>\n        {isLogin&&<Button className='LoginButton' onClick={() => loginFn()}>登陆</Button>}\n        {!isLogin&&<Button className='LoginButton' onClick={() => register()}>注册</Button>}\n      </div>\n    </LoginWrapper>:<Redirect to='/'/>\n\n    }\n    </div>\n  );\n}\nconst mapStateToProps = (state) => ({\n  loginStatus: state.getIn(['login', 'login'])\n})\nconst mapDispatchToProps = (dispatch) => ({\n  login(accountRef,pwdRef){\n    dispatch(actionCreators.login(accountRef.current.state.value,pwdRef.current.state.value))\n  },\n  register(accountRef,pwdRef){\n    dispatch(actionCreators.register(accountRef.current.state.value,pwdRef.current.state.value))\n  }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n",["252","253"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\style.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\upload.js",["254","255"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\verify\\index.js",["256"],"/*\n * @Description: \n * @Author: Zhong Kailong\n * @LastEditTime: 2021-03-27 19:07:19\n */\nimport { useState,useEffect } from 'react'\nimport 'antd/dist/antd.css'\nimport { notification,InputNumber } from 'antd';\n\nvar _ = require('lodash');\n\nfunction Verify(props) {\n  let [a,setA] = useState(0)\n  let [b,setB] = useState(0)\n  let [c,setC] = useState(0)\n  let [operator,setOperator] = useState(0)\n  useEffect(() => {\n    let obj = getVerify();\n    setA(obj.a)\n    setB(obj.b)\n    setC(obj.c)\n    setOperator(obj.operator)\n  }, []);\n  var color= [\"#D0021B\", \"#417505\", \"#9013FE\", \"#002EFA\", \"#417505\", \"#9013FE\", \"#8b572a\", \"#002EFA\", \"#BD10E0\", \"#ff5a00\", \"#3FA536\", \"#B92281\"];\n  \n  function randomColor(){\n    let i = _.random(1,10);\n    return color[i]\n  }\n  function random(){\n    return _.random(1,20);\n  }\n  function getOperator(){\n    let a = random()\n    if(a%2 === 0) {\n      return '+'\n    }\n    else if(a%3 === 0) {\n      return '-'\n    }\n    else {\n      return '*'\n    }\n  }\n  function getVerify() {\n    let a = random();\n    let b = random();\n    let c = 0;\n    let operator = getOperator();\n    if(operator === '+'){\n      c = a+b;\n    }\n    if(operator === '-'){\n      c = a-b;\n    }\n    if(operator === '*'){\n      c = a*b;\n    }\n    return {a,b,operator,c}\n  }\n  function onChange(value) {\n    if(value === c) {\n      notification['success']({\n        message: '验证成功',\n        duration: 1,\n      });\n      props.sureVerify(true)\n    } else {\n      props.sureVerify(false)\n    }\n  }\n  return (\n    <div>\n      <span style={{ color: randomColor()}}>\n        {a}\n      </span>\n      <span style={{ color: randomColor() }}>\n        {operator}\n      </span>\n       <span style={{ color: randomColor() }}>\n        {b}\n      </span>\n       <span style={{ color: randomColor() }}>\n        =\n      </span>\n      <InputNumber  style={{ width: '55px' ,color: randomColor()}} size=\"small\" onChange={onChange}  maxLength={3} />\n    </div>\n  );\n}\n\nexport default Verify;\n",["257","258"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\App.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\utils.js",["259","260","261"],"/*\n * @Description: 配置了nginx的反向代理\n * @Author: Zhong Kailong\n * @LastEditTime: 2021-03-27 00:00:35\n */\nimport { useRef,useEffect,useCallback } from 'react';\n\nexport const url = 'http://localhost:9001'  //后续配置nginx\nexport const demoUrl = 'http://localhost:7003'\nexport const uploadUrl = 'http://localhost:7001'\n\n\nexport function useDebounce(fn, delay, dep = []) {\n  const { current } = useRef({ fn, timer: null });\n  useEffect(function () {\n    current.fn = fn;\n  }, [fn]);\n \n  return useCallback(function f(...args) {\n    if (current.timer) {\n      clearTimeout(current.timer);\n    }\n    current.timer = setTimeout(() => {\n      current.fn.call(this, ...args);\n    }, delay);\n  }, dep)\n}\n","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\style.js",[],["262","263"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\store\\index.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\statics\\iconfont\\iconfont.js",[],["264","265"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\trash\\index.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\store\\constants.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\store\\reducer.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\config.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\store\\reducer.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\focusIndex.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\messageIndex.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\detail\\store\\index.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\store\\reducer.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\home\\store\\constants.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\setting\\index.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\login\\store\\index.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\utils\\uploadWithButton.js",["266","267"],"/*\n * @Description: \n * @Author: Zhong Kailong\n * @LastEditTime: 2021-04-03 18:02:23\n */\nimport React, { useState ,useRef,useEffect} from 'react';\nimport { Upload } from 'antd';\nimport ImgCrop from 'antd-img-crop';\nimport {uploadUrl} from '@/utils/utils'\nimport { PlusOutlined } from '@ant-design/icons';\n\nconst Demo = (props) => {\n  const [fileList, setFileList] = useState([]);\n  const [imageUrl, setImageUrl] = useState(props.imageUrl);\n  const inputRef = useRef()\n  useEffect(() => {\n    props.getImageUrl(imageUrl);\n  }, [imageUrl])\n  // getImageUrl\n  const onChange = ({ fileList: newFileList }) => {\n    if(newFileList[0].response?.data.url){\n      setImageUrl(newFileList[0].response?.data.url)\n      newFileList.pop()\n    }\n  };\n\n  const onPreview = async file => {\n    let src = file.url;\n    if (!src) {\n      src = await new Promise(resolve => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file.originFileObj);\n        reader.onload = () => resolve(reader.result);\n      });\n    }\n    const image = new Image();\n    image.src = src;\n    const imgWindow = window.open(src);\n    imgWindow.document.write(image.outerHTML);\n  };\n\n  return (\n    <div style={{display:'flex',alignItems:'center'}}>\n      <div>\n\n    <ImgCrop rotate>\n      <Upload\n        action={`${uploadUrl}/eduoss/fileoss`}\n        listType=\"picture-card\"\n        fileList={fileList}\n        ref={inputRef}\n        onChange={onChange}\n        onPreview={onPreview}\n      >\n        {imageUrl ? <img src={imageUrl} alt=\"avatar\" style={{ width: '100%' }} /> : <PlusOutlined/>}\n      </Upload>\n    </ImgCrop>\n    </div>\n      <div style={{cursor:'pointer'}} onClick={()=>{\n        setImageUrl('')\n      }}>\n        删除\n      </div>\n      </div>\n  );\n};\n\nexport default Demo\n","C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\common\\header\\store\\index.js",[],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\personal\\index.js",["268"],"C:\\Users\\13788\\Desktop\\kl\\github\\ts-with-react\\src\\pages\\personal\\components\\List.js",["269","270","271","272","273","274","275","276","277","278","279","280","281"],{"ruleId":"282","replacedBy":"283"},{"ruleId":"284","replacedBy":"285"},{"ruleId":"282","replacedBy":"286"},{"ruleId":"284","replacedBy":"287"},{"ruleId":"282","replacedBy":"288"},{"ruleId":"284","replacedBy":"289"},{"ruleId":"290","severity":1,"message":"291","line":22,"column":5,"nodeType":"292","endLine":22,"endColumn":7,"suggestions":"293"},{"ruleId":"294","severity":1,"message":"295","line":63,"column":24,"nodeType":"296","messageId":"297","endLine":63,"endColumn":25,"suggestions":"298"},{"ruleId":"294","severity":1,"message":"299","line":63,"column":26,"nodeType":"296","messageId":"297","endLine":63,"endColumn":27,"suggestions":"300"},{"ruleId":"294","severity":1,"message":"295","line":63,"column":33,"nodeType":"296","messageId":"297","endLine":63,"endColumn":34,"suggestions":"301"},{"ruleId":"294","severity":1,"message":"299","line":63,"column":35,"nodeType":"296","messageId":"297","endLine":63,"endColumn":36,"suggestions":"302"},{"ruleId":"294","severity":1,"message":"295","line":63,"column":41,"nodeType":"296","messageId":"297","endLine":63,"endColumn":42,"suggestions":"303"},{"ruleId":"294","severity":1,"message":"299","line":63,"column":43,"nodeType":"296","messageId":"297","endLine":63,"endColumn":44,"suggestions":"304"},{"ruleId":"294","severity":1,"message":"299","line":76,"column":27,"nodeType":"296","messageId":"297","endLine":76,"endColumn":28,"suggestions":"305"},{"ruleId":"294","severity":1,"message":"295","line":76,"column":30,"nodeType":"296","messageId":"297","endLine":76,"endColumn":31,"suggestions":"306"},{"ruleId":"294","severity":1,"message":"299","line":76,"column":40,"nodeType":"296","messageId":"297","endLine":76,"endColumn":41,"suggestions":"307"},{"ruleId":"294","severity":1,"message":"295","line":76,"column":43,"nodeType":"296","messageId":"297","endLine":76,"endColumn":44,"suggestions":"308"},{"ruleId":"282","replacedBy":"309"},{"ruleId":"284","replacedBy":"310"},{"ruleId":"311","severity":1,"message":"312","line":323,"column":22,"nodeType":"296","messageId":"313","endLine":325,"endColumn":45},{"ruleId":"282","replacedBy":"314"},{"ruleId":"284","replacedBy":"315"},{"ruleId":"282","replacedBy":"316"},{"ruleId":"284","replacedBy":"317"},{"ruleId":"318","severity":1,"message":"319","line":8,"column":8,"nodeType":"320","messageId":"321","endLine":8,"endColumn":12},{"ruleId":"318","severity":1,"message":"322","line":9,"column":9,"nodeType":"320","messageId":"321","endLine":9,"endColumn":16},{"ruleId":"318","severity":1,"message":"323","line":18,"column":8,"nodeType":"320","messageId":"321","endLine":18,"endColumn":29},{"ruleId":"318","severity":1,"message":"324","line":23,"column":8,"nodeType":"320","messageId":"321","endLine":23,"endColumn":33},{"ruleId":"282","replacedBy":"325"},{"ruleId":"284","replacedBy":"326"},{"ruleId":"282","replacedBy":"327"},{"ruleId":"284","replacedBy":"328"},{"ruleId":"290","severity":1,"message":"329","line":44,"column":6,"nodeType":"292","endLine":44,"endColumn":15,"suggestions":"330"},{"ruleId":"318","severity":1,"message":"331","line":9,"column":9,"nodeType":"320","messageId":"321","endLine":9,"endColumn":17},{"ruleId":"318","severity":1,"message":"332","line":9,"column":19,"nodeType":"320","messageId":"321","endLine":9,"endColumn":28},{"ruleId":"333","severity":1,"message":"334","line":32,"column":1,"nodeType":"335","messageId":"336","endLine":32,"endColumn":25},{"ruleId":"282","replacedBy":"337"},{"ruleId":"284","replacedBy":"338"},{"ruleId":"290","severity":1,"message":"339","line":43,"column":5,"nodeType":"292","endLine":43,"endColumn":7,"suggestions":"340"},{"ruleId":"282","replacedBy":"341"},{"ruleId":"284","replacedBy":"342"},{"ruleId":"318","severity":1,"message":"343","line":13,"column":20,"nodeType":"320","messageId":"321","endLine":13,"endColumn":31},{"ruleId":"290","severity":1,"message":"344","line":18,"column":6,"nodeType":"292","endLine":18,"endColumn":16,"suggestions":"345"},{"ruleId":"290","severity":1,"message":"346","line":23,"column":6,"nodeType":"292","endLine":23,"endColumn":8,"suggestions":"347"},{"ruleId":"282","replacedBy":"348"},{"ruleId":"284","replacedBy":"349"},{"ruleId":"290","severity":1,"message":"291","line":17,"column":6,"nodeType":"292","endLine":17,"endColumn":10,"suggestions":"350"},{"ruleId":"290","severity":1,"message":"351","line":26,"column":6,"nodeType":"320","endLine":26,"endColumn":9},{"ruleId":"290","severity":1,"message":"352","line":26,"column":6,"nodeType":"320","endLine":26,"endColumn":9,"suggestions":"353"},{"ruleId":"282","replacedBy":"354"},{"ruleId":"284","replacedBy":"355"},{"ruleId":"282","replacedBy":"356"},{"ruleId":"284","replacedBy":"357"},{"ruleId":"318","severity":1,"message":"343","line":13,"column":20,"nodeType":"320","messageId":"321","endLine":13,"endColumn":31},{"ruleId":"290","severity":1,"message":"344","line":18,"column":6,"nodeType":"292","endLine":18,"endColumn":16,"suggestions":"358"},{"ruleId":"290","severity":1,"message":"359","line":30,"column":5,"nodeType":"292","endLine":30,"endColumn":7,"suggestions":"360"},{"ruleId":"318","severity":1,"message":"361","line":15,"column":8,"nodeType":"320","messageId":"321","endLine":15,"endColumn":15},{"ruleId":"318","severity":1,"message":"362","line":15,"column":16,"nodeType":"320","messageId":"321","endLine":15,"endColumn":26},{"ruleId":"290","severity":1,"message":"363","line":20,"column":5,"nodeType":"292","endLine":20,"endColumn":7,"suggestions":"364"},{"ruleId":"294","severity":1,"message":"295","line":43,"column":24,"nodeType":"296","messageId":"297","endLine":43,"endColumn":25,"suggestions":"365"},{"ruleId":"294","severity":1,"message":"299","line":43,"column":26,"nodeType":"296","messageId":"297","endLine":43,"endColumn":27,"suggestions":"366"},{"ruleId":"294","severity":1,"message":"295","line":43,"column":33,"nodeType":"296","messageId":"297","endLine":43,"endColumn":34,"suggestions":"367"},{"ruleId":"294","severity":1,"message":"299","line":43,"column":35,"nodeType":"296","messageId":"297","endLine":43,"endColumn":36,"suggestions":"368"},{"ruleId":"294","severity":1,"message":"295","line":43,"column":41,"nodeType":"296","messageId":"297","endLine":43,"endColumn":42,"suggestions":"369"},{"ruleId":"294","severity":1,"message":"299","line":43,"column":43,"nodeType":"296","messageId":"297","endLine":43,"endColumn":44,"suggestions":"370"},{"ruleId":"294","severity":1,"message":"299","line":56,"column":27,"nodeType":"296","messageId":"297","endLine":56,"endColumn":28,"suggestions":"371"},{"ruleId":"294","severity":1,"message":"295","line":56,"column":30,"nodeType":"296","messageId":"297","endLine":56,"endColumn":31,"suggestions":"372"},{"ruleId":"294","severity":1,"message":"299","line":56,"column":40,"nodeType":"296","messageId":"297","endLine":56,"endColumn":41,"suggestions":"373"},{"ruleId":"294","severity":1,"message":"295","line":56,"column":43,"nodeType":"296","messageId":"297","endLine":56,"endColumn":44,"suggestions":"374"},"no-native-reassign",["375"],"no-negated-in-lhs",["376"],["375"],["376"],["375"],["376"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'current'. Either include it or remove the dependency array.","ArrayExpression",["377"],"no-useless-escape","Unnecessary escape character: \\'.","Literal","unnecessaryEscape",["378","379"],"Unnecessary escape character: \\\".",["380","381"],["382","383"],["384","385"],["386","387"],["388","389"],["390","391"],["392","393"],["394","395"],["396","397"],["375"],["376"],"no-multi-str","Multiline support is limited to browsers supporting ES5 only.","multilineString",["375"],["376"],["375"],["376"],"no-unused-vars","'http' is defined but never used.","Identifier","unusedVar","'demoUrl' is defined but never used.","'getArticleContentList' is assigned a value but never used.","'getMoreArticleContentList' is assigned a value but never used.",["375"],["376"],["375"],["376"],"React Hook useEffect has a missing dependency: 'memberInfo.id'. Either include it or remove the dependency array.",["398"],"'useState' is defined but never used.","'useEffect' is defined but never used.","no-lone-blocks","Block is redundant.","BlockStatement","redundantBlock",["375"],["376"],"React Hook useEffect has a missing dependency: 'props.location'. Either include it or remove the dependency array.",["399"],["375"],["376"],"'setFileList' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["400"],"React Hook useEffect has a missing dependency: 'getVerify'. Either include it or remove the dependency array.",["401"],["375"],["376"],["402"],"React Hook useCallback was passed a dependency list that is not an array literal. This means we can't statically verify whether you've passed the correct dependencies.","React Hook useCallback has missing dependencies: 'current' and 'delay'. Either include them or remove the dependency array.",["403"],["375"],["376"],["375"],["376"],["404"],"React Hook useEffect has a missing dependency: 'getMemberInfo'. Either include it or remove the dependency array.",["405"],"'current' is assigned a value but never used.","'setCurrent' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array.",["406"],["407","408"],["409","410"],["411","412"],["413","414"],["415","416"],["417","418"],["419","420"],["421","422"],["423","424"],["425","426"],"no-global-assign","no-unsafe-negation",{"desc":"427","fix":"428"},{"messageId":"429","fix":"430","desc":"431"},{"messageId":"432","fix":"433","desc":"434"},{"messageId":"429","fix":"435","desc":"431"},{"messageId":"432","fix":"436","desc":"434"},{"messageId":"429","fix":"437","desc":"431"},{"messageId":"432","fix":"438","desc":"434"},{"messageId":"429","fix":"439","desc":"431"},{"messageId":"432","fix":"440","desc":"434"},{"messageId":"429","fix":"441","desc":"431"},{"messageId":"432","fix":"442","desc":"434"},{"messageId":"429","fix":"443","desc":"431"},{"messageId":"432","fix":"444","desc":"434"},{"messageId":"429","fix":"445","desc":"431"},{"messageId":"432","fix":"446","desc":"434"},{"messageId":"429","fix":"447","desc":"431"},{"messageId":"432","fix":"448","desc":"434"},{"messageId":"429","fix":"449","desc":"431"},{"messageId":"432","fix":"450","desc":"434"},{"messageId":"429","fix":"451","desc":"431"},{"messageId":"432","fix":"452","desc":"434"},{"desc":"453","fix":"454"},{"desc":"455","fix":"456"},{"desc":"457","fix":"458"},{"desc":"459","fix":"460"},{"desc":"461","fix":"462"},{"desc":"463","fix":"464"},{"desc":"457","fix":"465"},{"desc":"466","fix":"467"},{"desc":"468","fix":"469"},{"messageId":"429","fix":"470","desc":"431"},{"messageId":"432","fix":"471","desc":"434"},{"messageId":"429","fix":"472","desc":"431"},{"messageId":"432","fix":"473","desc":"434"},{"messageId":"429","fix":"474","desc":"431"},{"messageId":"432","fix":"475","desc":"434"},{"messageId":"429","fix":"476","desc":"431"},{"messageId":"432","fix":"477","desc":"434"},{"messageId":"429","fix":"478","desc":"431"},{"messageId":"432","fix":"479","desc":"434"},{"messageId":"429","fix":"480","desc":"431"},{"messageId":"432","fix":"481","desc":"434"},{"messageId":"429","fix":"482","desc":"431"},{"messageId":"432","fix":"483","desc":"434"},{"messageId":"429","fix":"484","desc":"431"},{"messageId":"432","fix":"485","desc":"434"},{"messageId":"429","fix":"486","desc":"431"},{"messageId":"432","fix":"487","desc":"434"},{"messageId":"429","fix":"488","desc":"431"},{"messageId":"432","fix":"489","desc":"434"},"Update the dependencies array to be: [current]",{"range":"490","text":"491"},"removeEscape",{"range":"492","text":"493"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"494","text":"495"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"496","text":"493"},{"range":"497","text":"495"},{"range":"498","text":"493"},{"range":"499","text":"495"},{"range":"500","text":"493"},{"range":"501","text":"495"},{"range":"502","text":"493"},{"range":"503","text":"495"},{"range":"504","text":"493"},{"range":"505","text":"495"},{"range":"506","text":"493"},{"range":"507","text":"495"},{"range":"508","text":"493"},{"range":"509","text":"495"},{"range":"510","text":"493"},{"range":"511","text":"495"},{"range":"512","text":"493"},{"range":"513","text":"495"},"Update the dependencies array to be: [current, memberInfo.id]",{"range":"514","text":"515"},"Update the dependencies array to be: [props.location]",{"range":"516","text":"517"},"Update the dependencies array to be: [imageUrl, props]",{"range":"518","text":"519"},"Update the dependencies array to be: [getVerify]",{"range":"520","text":"521"},"Update the dependencies array to be: [current, fn]",{"range":"522","text":"523"},"Update the dependencies array to be: [current, delay]",{"range":"524","text":"525"},{"range":"526","text":"519"},"Update the dependencies array to be: [getMemberInfo]",{"range":"527","text":"528"},"Update the dependencies array to be: [props]",{"range":"529","text":"530"},{"range":"531","text":"493"},{"range":"532","text":"495"},{"range":"533","text":"493"},{"range":"534","text":"495"},{"range":"535","text":"493"},{"range":"536","text":"495"},{"range":"537","text":"493"},{"range":"538","text":"495"},{"range":"539","text":"493"},{"range":"540","text":"495"},{"range":"541","text":"493"},{"range":"542","text":"495"},{"range":"543","text":"493"},{"range":"544","text":"495"},{"range":"545","text":"493"},{"range":"546","text":"495"},{"range":"547","text":"493"},{"range":"548","text":"495"},{"range":"549","text":"493"},{"range":"550","text":"495"},[701,703],"[current]",[2007,2008],"",[2007,2007],"\\",[2009,2010],[2009,2009],[2016,2017],[2016,2016],[2018,2019],[2018,2018],[2024,2025],[2024,2024],[2026,2027],[2026,2026],[2327,2328],[2327,2327],[2330,2331],[2330,2330],[2340,2341],[2340,2340],[2343,2344],[2343,2343],[1337,1346],"[current, memberInfo.id]",[1190,1192],"[props.location]",[526,536],"[imageUrl, props]",[523,525],"[getVerify]",[465,469],"[current, fn]",[680,683],"[current, delay]",[526,536],[764,766],"[getMemberInfo]",[608,610],"[props]",[1414,1415],[1414,1414],[1416,1417],[1416,1416],[1423,1424],[1423,1423],[1425,1426],[1425,1425],[1431,1432],[1431,1431],[1433,1434],[1433,1433],[1734,1735],[1734,1734],[1737,1738],[1737,1737],[1747,1748],[1747,1747],[1750,1751],[1750,1750]]